{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAMA,MAAMC,EAAO,CACXC,YAAaC,SAASC,cAAc,gBACpCC,eAAgBF,SAASC,cAAc,YACvCE,mBAAoBH,SAASC,cAAc,qBAIvCG,EAAU,IAAIC,EAAAT,GAAJ,CAAmB,cAG7BU,EAAa,IAAI,EAAAC,EAAAC,SAOvBC,eAAeC,EAAeC,EAAOC,GAEnC,IAEE,MAAMC,QAAeP,EAAWQ,YAAYH,EAAOC,GAsBnD,GApBa,IAATA,GAEFG,EAAAC,OAAOC,QAAQ,oBAAoBX,EAAWY,iBAIhDpB,EAAKI,eAAeiB,mBAClB,YACAN,EAAOO,IAAIC,EAAAb,SAAmBc,KAAK,KAIrClB,EAAQmB,UAGK,IAATX,GA0CR,WACE,MAAQY,OAAQC,GACd3B,EAAKI,eAAewB,kBAAkBC,wBAExCC,OAAOC,SAAS,CACdC,IAAKF,OAAOG,YAAcN,EAC1BO,SAAU,U,CA/CRC,GAIE3B,EAAWM,MAAQN,EAAW4B,SAIhC,MAHAC,IAGM,IAAIC,MACR,8DAyBNtC,EAAKK,mBAAmBkC,UAAUC,OAAO,Y,CApBvC,MAAOC,GAEPxB,EAAAC,OAAOwB,QAAQD,EAAME,Q,EAqBzB,SAASN,IACPrC,EAAKK,mBAAmBkC,UAAUK,IAAI,Y,CAkBxC5C,EAAKC,YAAY4C,iBAAiB,UAElC,SAAsBC,GAEpBA,EAAMC,iBAjCN/C,EAAKI,eAAe4C,UAAY,GAGhCX,IAoCAzB,EAAekC,EAAMG,OAAOC,SAASC,YAAYC,MAAO,E,IAQ1DpD,EAAKK,mBAAmBwC,iBAAiB,SAEzC,SAA4BC,GAE1BlC,EAAe,KAAMJ,EAAWM,KAAO,E","sources":["src/js/index.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport PixabayApi from './pixabay-api.js';\nimport photoCardTemplate from './photo-card-template.js';\n\nconst refs = {\n  formElement: document.querySelector('#search-form'),\n  galleryElement: document.querySelector('.gallery'),\n  loadMoreBtnElement: document.querySelector('button.load-more'),\n};\n\n// Initialize SimpleLightbox\nconst gallery = new SimpleLightbox('.gallery a');\n\n// Create new object to handle all requests\nconst pixabayApi = new PixabayApi();\n\n/**\n  |============================\n  | Function to Process Request\n  |============================\n*/\nasync function processRequest(query, page) {\n  // Send request to a server\n  try {\n    // Fetch Photos from a server\n    const photos = await pixabayApi.fetchPhotos(query, page);\n\n    if (page === 1) {\n      // Display Total Found message only when we are on the first page\n      Notify.success(`Hooray! We found ${pixabayApi.total} images.`);\n    }\n\n    // Insert new Images to the content\n    refs.galleryElement.insertAdjacentHTML(\n      'beforeend',\n      photos.map(photoCardTemplate).join('')\n    );\n\n    // Reinitilize the lightbox\n    gallery.refresh();\n\n    // Scroll page only when we load second and any other page\n    if (page !== 1) {\n      scroll();\n    }\n\n    // Check if we have reached the last page\n    if (pixabayApi.page >= pixabayApi.lastPage) {\n      hideLoadMoreBtn();\n\n      // Throw error message\n      throw new Error(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    } else {\n      showLoadMoreBtn();\n    }\n  } catch (error) {\n    // Show Error message\n    Notify.failure(error.message);\n  }\n}\n\n/**\n  |============================\n  | UI unil functions\n  |============================\n*/\n// Function to clear content\nfunction clearContent() {\n  refs.galleryElement.innerHTML = '';\n\n  //Hide Load More button\n  hideLoadMoreBtn();\n}\n// Function to Show Load More button\nfunction showLoadMoreBtn() {\n  refs.loadMoreBtnElement.classList.remove('is-hidden');\n}\n// Function to Hide Load More button\nfunction hideLoadMoreBtn() {\n  refs.loadMoreBtnElement.classList.add('is-hidden');\n}\n// Function to scroll page\nfunction scroll() {\n  const { height: cardHeight } =\n    refs.galleryElement.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: window.innerHeight - cardHeight,\n    behavior: 'smooth',\n  });\n}\n\n/**\n  |============================\n  | Add Event Listener for Form submit event\n  |============================\n*/\nrefs.formElement.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(event) {\n  // Prevent default form submit action\n  event.preventDefault();\n\n  // Clear content\n  clearContent();\n\n  // Send request to the server and render HTML\n  processRequest(event.target.elements.searchQuery.value, 1);\n}\n\n/**\n  |============================\n  | Add Event Listener for Load More button\n  |============================\n*/\nrefs.loadMoreBtnElement.addEventListener('click', onLoadMoreBtnClick);\n\nfunction onLoadMoreBtnClick(event) {\n  // Send request to the server and render HTML\n  processRequest(null, pixabayApi.page + 1);\n}\n"],"names":["$fZKcF","parcelRequire","$85a5f86b715fe7db$var$refs","formElement","document","querySelector","galleryElement","loadMoreBtnElement","$85a5f86b715fe7db$var$gallery","$parcel$interopDefault","$85a5f86b715fe7db$var$pixabayApi","$6fOXY","default","async","$85a5f86b715fe7db$var$processRequest","query","page","photos","fetchPhotos","$iQIUW","Notify","success","total","insertAdjacentHTML","map","$FJc4W","join","refresh","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","innerHeight","behavior","$85a5f86b715fe7db$var$scroll","lastPage","$85a5f86b715fe7db$var$hideLoadMoreBtn","Error","classList","remove","error","failure","message","add","addEventListener","event","preventDefault","innerHTML","target","elements","searchQuery","value"],"version":3,"file":"index.ac3c6f1e.js.map"}