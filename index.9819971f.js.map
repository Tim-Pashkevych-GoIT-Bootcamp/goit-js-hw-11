{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAMMC,EAAO,CACXC,YAAaC,SAASC,cAAc,gBACpCC,eAAgBF,SAASC,cAAc,YACvCE,mBAAoBH,SAASC,cAAc,qBAIvCG,EAAU,IAAIC,EAAAC,GAAJ,CAAmB,cAG7BC,EAAa,IAAI,EAAAC,EAAAC,S,SAORC,EAAeC,EAAOC,G,OAAtBC,EAAcC,MAAAC,KAAAC,U,UAAdH,I,OAAAA,EAAfR,EAAAT,EAAA,CAAAS,EAAAY,GAAAC,MAAA,SAAAC,EAA8BR,EAAOC,G,IAI3BQ,E,2FAAeb,EAAWc,YAAYV,EAAOC,G,UAA7CQ,EAAME,EAAAC,KAEC,IAATX,GAEFY,EAAAC,OAAOC,QAAQ,oBAAqCC,OAAjBpB,EAAWqB,MAAM,aAItD9B,EAAKI,eAAe2B,mBAClB,YACAT,EAAOU,IAAIC,EAAAtB,SAAmBuB,KAAK,KAIrC5B,EAAQ6B,UAGK,IAATrB,GACFsB,MAIE3B,EAAWK,MAAQL,EAAW4B,UAAQ,C,gBAIxC,MAHAC,IAGM,IAAIC,MACR,8D,QAGFC,I,0DAIFd,EAAAC,OAAOc,QAAQjB,EAAAkB,GAAMC,S,2DAtCI3B,MAAAC,KAAAC,U,CAuD7B,SAASsB,IACPxC,EAAKK,mBAAmBuC,UAAUC,OAAO,Y,CAG3C,SAASP,IACPtC,EAAKK,mBAAmBuC,UAAUE,IAAI,Y,CAGxC,SAASV,IACP,IAAQW,EACN/C,EAAKI,eAAe4C,kBAAkBC,wBADhCC,OAGRC,OAAOC,SAAS,CACdC,IAAKF,OAAOG,YAAcP,EAC1BQ,SAAU,U,CASdvD,EAAKC,YAAYuD,iBAAiB,UAElC,SAAsBC,GAEpBA,EAAMC,iBAjCN1D,EAAKI,eAAeuD,UAAY,GAGhCrB,IAoCA1B,EAAe6C,EAAMG,OAAOC,SAASC,YAAYC,MAAO,E,IAQ1D/D,EAAKK,mBAAmBmD,iBAAiB,SAEzC,SAA4BC,GAE1B7C,EAAe,KAAMH,EAAWK,KAAO,E","sources":["src/js/index.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport PixabayApi from './pixabay-api.js';\nimport photoCardTemplate from './photo-card-template.js';\n\nconst refs = {\n  formElement: document.querySelector('#search-form'),\n  galleryElement: document.querySelector('.gallery'),\n  loadMoreBtnElement: document.querySelector('button.load-more'),\n};\n\n// Initialize SimpleLightbox\nconst gallery = new SimpleLightbox('.gallery a');\n\n// Create new object to handle all requests\nconst pixabayApi = new PixabayApi();\n\n/**\n  |============================\n  | Function to Process Request\n  |============================\n*/\nasync function processRequest(query, page) {\n  // Send request to a server\n  try {\n    // Fetch Photos from a server\n    const photos = await pixabayApi.fetchPhotos(query, page);\n\n    if (page === 1) {\n      // Display Total Found message only when we are on the first page\n      Notify.success(`Hooray! We found ${pixabayApi.total} images.`);\n    }\n\n    // Insert new Images to the content\n    refs.galleryElement.insertAdjacentHTML(\n      'beforeend',\n      photos.map(photoCardTemplate).join('')\n    );\n\n    // Reinitilize the lightbox\n    gallery.refresh();\n\n    // Scroll page only when we load second and any other page\n    if (page !== 1) {\n      scroll();\n    }\n\n    // Check if we have reached the last page\n    if (pixabayApi.page >= pixabayApi.lastPage) {\n      hideLoadMoreBtn();\n\n      // Throw error message\n      throw new Error(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    } else {\n      showLoadMoreBtn();\n    }\n  } catch (error) {\n    // Show Error message\n    Notify.failure(error.message);\n  }\n}\n\n/**\n  |============================\n  | UI unil functions\n  |============================\n*/\n// Function to clear content\nfunction clearContent() {\n  refs.galleryElement.innerHTML = '';\n\n  //Hide Load More button\n  hideLoadMoreBtn();\n}\n// Function to Show Load More button\nfunction showLoadMoreBtn() {\n  refs.loadMoreBtnElement.classList.remove('is-hidden');\n}\n// Function to Hide Load More button\nfunction hideLoadMoreBtn() {\n  refs.loadMoreBtnElement.classList.add('is-hidden');\n}\n// Function to scroll page\nfunction scroll() {\n  const { height: cardHeight } =\n    refs.galleryElement.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: window.innerHeight - cardHeight,\n    behavior: 'smooth',\n  });\n}\n\n/**\n  |============================\n  | Add Event Listener for Form submit event\n  |============================\n*/\nrefs.formElement.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(event) {\n  // Prevent default form submit action\n  event.preventDefault();\n\n  // Clear content\n  clearContent();\n\n  // Send request to the server and render HTML\n  processRequest(event.target.elements.searchQuery.value, 1);\n}\n\n/**\n  |============================\n  | Add Event Listener for Load More button\n  |============================\n*/\nrefs.loadMoreBtnElement.addEventListener('click', onLoadMoreBtnClick);\n\nfunction onLoadMoreBtnClick(event) {\n  // Send request to the server and render HTML\n  processRequest(null, pixabayApi.page + 1);\n}\n"],"names":["$bpxeT","parcelRequire","$44ae6d9db4eaca0f$var$refs","formElement","document","querySelector","galleryElement","loadMoreBtnElement","$44ae6d9db4eaca0f$var$gallery","$parcel$interopDefault","$5IjG7","$44ae6d9db4eaca0f$var$pixabayApi","$8H72y","default","$44ae6d9db4eaca0f$var$processRequest","query","page","$44ae6d9db4eaca0f$var$_processRequest","apply","this","arguments","$2TvXO","mark","_callee","photos","fetchPhotos","_ctx","sent","$h6c0i","Notify","success","concat","total","insertAdjacentHTML","map","$8clWC","join","refresh","$44ae6d9db4eaca0f$var$scroll","lastPage","$44ae6d9db4eaca0f$var$hideLoadMoreBtn","Error","$44ae6d9db4eaca0f$var$showLoadMoreBtn","failure","t0","message","classList","remove","add","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","innerHeight","behavior","addEventListener","event","preventDefault","innerHTML","target","elements","searchQuery","value"],"version":3,"file":"index.9819971f.js.map"}